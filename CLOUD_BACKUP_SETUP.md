# ☁️ クラウドバックアップ設定ガイド

TalkFridgeのデータを自動的にGoogleスプレッドシートやNotionにバックアップする方法です。

---

## 🔧 Googleスプレッドシート連携

### 1. スプレッドシートを作成

1. [Googleスプレッドシート](https://sheets.google.com) を開く
2. 新しいスプレッドシートを作成
3. スプレッドシートIDをコピー（URLの `/d/` と `/edit` の間の文字列）

**例：**
```
https://docs.google.com/spreadsheets/d/ABC123XYZ456/edit
                                        ↑これがスプレッドシートID
```

### 2. Google Cloud Console でAPIキーを取得

1. [Google Cloud Console](https://console.cloud.google.com/) にアクセス
2. プロジェクトを作成（または既存のプロジェクトを選択）
3. 「APIとサービス」→「ライブラリ」→「Google Sheets API」を有効化
4. 「APIとサービス」→「認証情報」→「認証情報を作成」→「APIキー」
5. APIキーをコピー

### 3. アプリで設定

1. 「食べた歴史」タブを開く
2. 「⚙️ 設定」をクリック
3. サービスを「Googleスプレッドシート」に選択
4. APIキーとスプレッドシートIDを入力
5. 設定を保存

### 4. スプレッドシートの共有設定（重要）

作成したスプレッドシートを「リンクを知っている全員」に編集権限を付与するか、APIキーを使ってアクセスできるように設定する必要があります。

---

## 📝 Notion連携

### 1. Notionインテグレーションを作成

1. [Notion Integrations](https://www.notion.so/my-integrations) にアクセス
2. 「+ New integration」をクリック
3. 名前を入力（例：「TalkFridge」）
4. 「Internal Integration」を選択
5. 「Submit」をクリック
6. **Internal Integration Token** をコピー（これがAPIキー）

### 2. データベースを作成

1. Notionで新しいページを作成
2. 「/」と入力して「Table」を選択
3. 列を追加：
   - 食材名（タイトル）
   - 数量（数値）
   - 単位（テキスト）
   - カテゴリ（選択肢）
   - 登録日（日付）

### 3. データベースをインテグレーションに接続

1. データベースの「...」メニューをクリック
2. 「Connections」→ 作成したインテグレーションを選択
3. データベースIDをコピー（URLの最後の部分）

**例：**
```
https://www.notion.so/workspace/ABC123XYZ456
                                      ↑これがデータベースID
```

### 4. アプリで設定

1. 「食べた歴史」タブを開く
2. 「⚙️ 設定」をクリック
3. サービスを「Notion」に選択
4. APIキー（Internal Integration Token）とデータベースIDを入力
5. 設定を保存

---

## 🔄 自動バックアップ

設定後、食材を追加すると自動的にクラウドにバックアップされます。

- **手動バックアップ**: 「🔄 今すぐバックアップ」ボタンをクリック

---

## ⚠️ 注意事項

1. **APIキーのセキュリティ**
   - APIキーはブラウザのlocalStorageに保存されます
   - 暗号化されていないため、個人利用のみ推奨
   - 共有のコンピューターでは使用しないでください

2. **無料枠**
   - Google Sheets API: 1分あたり100リクエスト（個人利用なら十分）
   - Notion API: 月間3リクエスト/秒（個人利用なら十分）

3. **データ形式**
   - 現在は食材情報のみバックアップ（レシピ履歴・使用履歴は今後追加予定）

---

## 🚀 より安全な方法（将来実装予定）

- OAuth認証（APIキー不要）
- 暗号化されたバックアップ
- 自動定期的バックアップ
- 複数のバックアップ先の選択

